# Kafka的发布/订阅模式

![image-20210711161440241](E:\Javadream\Kafka\Kafka的消费模式.assets\image-20210711161440241.png)

消费者去拉去队列中的消息，相比于 队列推送来说，他的优点是不用考虑消费者的处理能力，如果要是队列推送的话，如果推送数据大于消费者的处理能力有可能会出现buffer溢出之类的问题。

所以Kafka采用的是消费者主动拉取模式，但是缺点是需要消费者一直采用一个while true的轮询去 查看队列中是否有消息

![image-20210711165926211](E:\Javadream\Kafka\Kafka的消费模式.assets\image-20210711165926211.png)

1. 在集群中存储数据：集群有多个分区，数据可以分布式的存储在不同的分区中，同时有follower会备份leader中的数据在与leader不同的分区中。防止由于某个分区down掉 导致的数据丢失
2. 对于消费者来说，如果有消费者组，同一个分区只能被同一个消费者组里面的某一个消费者所消费。例如 consumer A 消费分区1，那么同组里的B不能消费分区1。在这个例子中，消费者组里的消费者个数和集群Topic A的分区数据相同，所以可以做到A访问分区1，B访问分区2

在0.9版本之前
